<!doctype html>
<head>
  <meta charset="utf-8">
  <title>cssobj playground</title>
  <script type="text/javascript" src="../node_modules/extend_exclude/iife/extend_exclude.js"></script>
  <script type="text/javascript" src="../lib/cssobj.js"></script>
  <style type="text/css" media="screen">
  html,body{
    height:100%;
}
textarea{
    width:80%;
    height:40%;
}
  </style>
</head>
<body>
  <h3>Input JS Object:</h3>
  <textarea id="src" oninput="convert(this)"></textarea>
  <h3>Output CSS String:</h3>
  <textarea id="css"></textarea>
  <script type="text/javascript">
  var obj = {
    'ul.menu': {
      background_color: 'red',
      borderRadius: '2px',
      'li.item': [
        {
          '&:before, .link': {
            ".foo[title*='\\&'], :global(.xy)": {color: 'blue'},
            color: 'red'
          },
          'html:global(.ie8) &': {color: 'purple'},
          font_size: '12px'
        },
        {
          'span': {
            font_size: '22px'
          },
          color: 'blue'
        }
      ]
    }
  }


  var testData = [{"_p":{"\\_color":"red","_backColor":"23"},".c":[{"color":"red", '&:before':{color:'#222'}},{"font":1234}]},{".p":{"color":"red","back":"23ret","@media & condition":{"color":"red2","@media c2":{"\\_color":"blue"},"&.d":{"x":1}}}},{"p3":{"color":"re56565656d","back":"24563","sdf":23453}}]

src.value = JSON.stringify(testData)
var opt = {indent:'  ', local:1, dashProp:0}
function convert(el){
  try{
    var obj = new Function('return '+el.value)
    var ret = cssobj(obj(), opt, {p:'asdfasdf'})
    document.getElementById('css').value = ret.css
    console.log(ret)
  }catch(e){
    //console.log(e)
  }
}
  convert(src)
  </script>
</body>
